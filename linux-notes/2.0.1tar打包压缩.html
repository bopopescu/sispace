<html>
<head>
  <title>2.0.1tar打包/压缩</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308859 (zh-CN, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1347"/>
<h1>2.0.1tar打包/压缩</h1>

<div>
<span><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">基础掌握：</span><span style="font-size: 10pt; font-weight: bold;">需要自行安装yum install bzip2</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 14pt;">压 缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</span></div><div><span style="font-size: 14pt;">查 询：tar -jtv -f filename.tar.bz2</span></div><div><span style="font-size: 14pt;">解压缩：tar -jxv -f filename.tar.bz2 -C 指定欲解压缩的目录</span></div></div><div><img src="2.0.1tar打包压缩_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><span style="font-size: 14pt; font-weight: bold;">将文件全部打包成 tar 包：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 10pt;">tar -cvf log.tar log2012.log 仅打包，不压缩！【体积将会成两倍大】</span></div><div><span style="font-size: 10pt;">tar -zcvf log.tar.gz log2012.log 打包后，以 gzip 压缩</span></div><div><span style="font-size: 10pt;">tar -jcvf log.tar.bz2 log2012.log 打包后，以 bzip2 压缩</span></div></div><div><span style="font-size: 14pt; font-weight: bold;">将 tar 包解压缩：</span><span style="font-size: 10pt; font-weight: bold;">【z的能力没有j的强】</span></div><div><br clear="none"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 10pt;">tar -zxvf /opt/soft/test/log.tar.gz</span></div><div><br clear="none"/></div><div><span style="font-size: 10pt;">tar -zxvf /opt/soft/test/log30.tar.gz log2013.log【只将 tar 内的部分文件解压出来】</span></div><div><br clear="none"/></div><div><span style="font-size: 10pt;">tar -zcvpf log31.tar.gz log2014.log log2015.log log2016.log【文件备份下来，并且保存其权限】</span></div><div><br clear="none"/></div><div><span style="font-size: 10pt;">tar -N &quot;2012/11/13&quot; -zcvf log17.tar.gz test【在文件夹当中，比某个日期新的文件才备份：】</span></div><div><br clear="none"/></div><div><span style="font-size: 10pt;">tar --exclude scf/service -zcvf scf.tar.gz scf/*【备份文件夹内容是排除部分文件：】</span></div><div>注意tar在压缩时，有覆盖同名称文件的功能</div></div><div><span style="font-size: 16pt;"><img src="2.0.1tar打包压缩_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt; font-weight: bold;">zip【针对文件和目录】</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>首先将 /etc 目录下的所有文件以及子目录进行压缩，备份压缩包 etc.zip 到 /opt 目录，</div><div>然后对 etc.zip 文件进行 gzip 压缩，设置 gzip 的压缩级别为 9。</div><div>zip –r /opt/etc.zip /etc</div><div>使用unzip解压</div></div><div><span style="font-size: 14pt; font-weight: bold;">unzip【针对文件处理】</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>gzip -9v /opt/etc.zip</div><div>gzip -l /opt/etc.zip.gz【查看压缩情况】</div><div><br/></div><div>解压上述 etc.zip.gz 文件到当前目录。【gzip是一种在源文件上压缩却不打包的压缩方式】</div><div>[root@mylinux ~]#gzip –d /opt/etc.zip.gz</div><div>或者执行</div><div>[root@mylinux ~]#gunzip /opt/etc.zip.gz</div><div>若果压缩的时纯文本文件的话，可以在不解压的情况使用zcat查看</div></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">bzip2</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>压缩指定文件 filename:</div><div>bzip2 filename</div><div>或</div><div>bzip2 -z filename</div><div>解压指定的文件 filename.bz2:</div><div>bzip2 -d filename.bz2</div><div>或</div><div>bunzip2 filename.bz2</div></div><div>参数的说明;</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 501px;"></col></colgroup><tbody><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-c</div><div><br clear="none"/></div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>新建打包文件，同 -v 一起使用 查看过程中打包文件名</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-x</div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>解决文件， -C 解压到对应的文件目录。</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-f</div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>后面接要处理的文件</div></td></tr><tr><td rowspan="1" style="background-color: rgb(234, 234, 234); border: 1px solid rgb(187, 187, 187); width: 130px; padding: 8px;"><div>-j</div></td><td rowspan="1" style="background-color: rgb(234, 234, 234); border: 1px solid rgb(187, 187, 187); width: 501px; padding: 8px;"><div>通过bzip2方式压缩或解压，最后以.tar.br2 为后缀。压缩后大小小于.tar.gz</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div><span style="background-color: #fffaa5;-evernote-highlight:true;">-z</span></div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div><span style="background-color: #fffaa5;-evernote-highlight:true;">通过gzip方式压缩或解压，最后以.tar.gz 为后缀</span></div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-v</div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>压缩或解压过程中，显示出来过程</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-t</div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>查看打包文件中内容，重点文件名</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div>-u</div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div>更新压缩文件中的内容</div></td></tr><tr><td rowspan="1" style="width: 130px; padding: 8px; border: 1px solid;"><div><br clear="none"/></div></td><td rowspan="1" style="width: 501px; padding: 8px; border: 1px solid;"><div><br clear="none"/></div></td></tr></tbody></table><div><br clear="none"/></div></div><div><br clear="none"/></div></span>
</div></body></html> 