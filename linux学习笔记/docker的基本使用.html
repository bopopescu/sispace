<html>
<head>
  <title>docker的基本使用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308859 (zh-CN, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1393"/>
<h1>docker的基本使用</h1>

<div>
<span><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">例</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">1</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">：运行一个</span> <span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">container</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">并加载镜像</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">centos</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">，运行起来这个实例后，在实例中执行</span> <span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">/bin/bash</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif; color: red;-en-paragraph:true;">命令</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif;-en-paragraph:true;">docker</span><span style="font-weight: bold; mso-bidi-font-weight: normal; font-size: 9.0pt; font-family: &quot;微软雅黑&quot;,sans-serif;-en-paragraph:true;">常用参数：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>run  运行</div><div>-i   以交互模式运行容器，通常与 -t 同时使用；</div><div>-t  为容器重新分配一个伪输入终端，通常与 -i 同时使用；</div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# docker images</span></div><div><span style="font-size: 9pt;">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span></div><div><span style="font-size: 9pt;">docker.io/centos    latest              196e0ce0c9fb        12 days ago         196.6 MB</span></div><div><span style="font-size: 9pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">[root@xuegod63 ~]# docker run  -it docker.io/centos:latest /bin/bash   #启动一个实例，也就2秒就可以搞定</span></span></div><div>[root@068fd8c70344 /]# ls   #查看实例环境</div><div>[root@f072b5ae7542 /]# cat /etc/redhat-release</div><div>退出容器：</div><div>[root@f072b5ae7542 /]#exit</div></div></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: 微软雅黑; color: rgb(255, 0, 0); font-size: 9.0pt; font-weight: bold;">例2：在 container 中启动一个长久运行的进程，不断向stdin输出 hello world 。模拟一个后台运行的服务</span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">docker常用参数：</span></div><div style="margin: 0mm 0mm 0mm 6mm; text-indent: 0mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-family: &quot;Microsoft YaHei&quot;; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">-d </span> <span style="font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">后台运行容器，并返回容器ID；<span>    </span><span>    </span><span>    </span><span>    </span></span><span style="text-indent: 0mm; font-family: &quot;Microsoft YaHei&quot;; color: rgb(1, 1, 1); font-size: 9pt; font-weight: bold;">-c </span> <span style="text-indent: 0mm; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9pt; font-weight: bold;">后面跟待完成的命令</span></span></div></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;"><br/></span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: ΢���ź�;">[root@xuegod63 ~]# docker run  -d docker.io/centos:latest /bin/sh -c &quot;while true;do  echo hello world; sleep 1; done&quot;</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: ΢���ź�;">输出：1b3493487c4fde6eb233d59fa9ab9a204ad993cd3debbd5a9a28be6816694605            #容器的ID</span></div></div></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: 微软雅黑; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;"><br/></span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: 微软雅黑; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">从一个容器中取日志，查看输出的内容</span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><br/></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">语法： docker  logs   容器实例的Name/ID  </span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">[root@xuegod63 ~]# docker logs 1b3493487c4    #容器的ID可以写全，也可以不写全，只要唯一就可以了</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">hello world</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">hello world</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">也可以使用短ID或docker实例的名字查看日志输出：</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">[root@xuegod63 ~]# docker logs c4a213627f1b</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">或：</span></div><div><span style="font-size: 9pt; color: rgb(1, 1, 1);">[root@xuegod63 ~]# docker logs compassionate_mclean</span></div></div></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="font-size: 9pt; color: rgb(1, 1, 1);"><b><br/></b></span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: 微软雅黑; color: rgb(255, 0, 0); font-size: 9.0pt; font-weight: bold;">查看正在运行的容器：</span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">[root@xuegod63 ~]# docker ps  #列出所有运行中容器。</span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 31pt; text-align: justify;"><img src="docker的基本使用_files/Image.png" type="image/png" data-filename="Image.png" width="574"/></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><br/></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">[root@xuegod63 ~]# docker ps -a  #</span><span style="text-indent: 6mm; min-height: 12pt; font-family: &quot;Microsoft YaHei&quot;; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">-a </span><span style="text-indent: 6mm; min-height: 12pt; font-family: 微软雅黑; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">列出所有容器（包含沉睡/退出状态的容器）；</span></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 32pt; text-align: justify;"><img src="docker的基本使用_files/Image [1].png" type="image/png" data-filename="Image.png" width="576"/></div><div style="margin: 0mm; text-indent: 6mm; padding-top: 0mm; padding-bottom: 0mm; min-height: 12pt; text-align: justify;"><span style="text-indent: 6mm; min-height: 12pt; font-family: ΢���ź�; color: rgb(1, 1, 1); font-size: 9.0pt; font-weight: bold;">[root@xuegod63 ~]# docker images  #列出所有本地镜像</span></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><font style="font-size: 12pt;"><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;"><br/></span></font></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><font style="font-size: 11pt;"><span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">例</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">4</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">：启动、停止、重启</span> <span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">container</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">容器实例</span></font></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">启动： run # 创建并运行docker实例</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# docker run  -d docker.io/centos:latest /bin/sh -c &quot;while true;do echo hello world; sleep 1; done&quot;</span></div></div></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@xuegod63 ~]# docker stop 1a63ddea6571  关闭容器</div><div>1a63ddea6571</div></div></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# docker start 1a63ddea6571</span></div><div><span style="font-size: 9pt;">1a63ddea6571</span></div></div></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# docker restart 1a63ddea6571</span></div><div><span style="font-size: 9pt;">1a63ddea6571</span></div></div></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><font style="font-size: 11pt;"><span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">删除指定</span> <span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">container</span> <span style="font-weight: bold; font-family: 微软雅黑, sans-serif; color: red;-en-paragraph:true;">：</span> <span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">rm</span></font></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@xuegod63 ~]# docker rm  e085da6919af</div><div>Error response from daemon: You cannot remove a running container e085da6919af2f294d73f8e717f93326f6c1a803938e8057aebfc36e28d05808.</div><div>Stop the container before attempting removal or use -f</div><div>解决：你可以先把容器1a63ddea6571 关闭，然后再删除或加-f 强制删除</div></div></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><font style="color: rgb(65, 173, 28); font-size: 11pt;"><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">杀死</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">ID</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">为</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">c4a213627f1b</span><span style="font-weight: bold; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">的容器：</span></font></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">[root@xuegod63 ~]# docker kill c4a213627f1b</span> <span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;"> </span><span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">#</span><span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;">杀死一个容器</span><span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><span style="text-indent: 6mm; font-weight: bold; font-size: 9pt; font-family: 微软雅黑, sans-serif;-en-paragraph:true;"><br/></span></div></span>
</div></body></html> 