<html>
<head>
  <title>2.0.6rpm的初步认识</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308859 (zh-CN, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1342"/>
<h1>2.0.6rpm的初步认识</h1>

<div>
<span><div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>安装 RPM 的命令格式为：</div><div>[root@localhost ~]# rpm -ivh 包全名</div><div><br/></div><div>使用如下命令即可实现 RPM 包的升级：</div><div>[root@localhost ~]# rpm -Uvh 包全名</div><div>-U（大写）选项的含义是：如果该软件没安装过则直接安装；若没安装则升级至最新版本。</div><div><br/></div><div>[root@localhost ~]# rpm -Fvh 包全名</div><div>-F（大写）选项的含义是：如果该软件没有安装，则不会安装，必须安装有较低版本才能升级。</div><div><br/></div><div>删除：</div><div>rpm -e 包全名</div></div><div><br/></div><div><br/></div><div>rqm查询软件包：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>用 rpm 查询软件包是否安装的命令格式为：</div><div>[root@localhost ~]# rpm -q 包名</div><div><br/></div><div>使用 rpm 查询 Linux 系统中所有已安装软件包的命令为：</div><div>[root@localhost ~]# rpm -qa</div><div><br/></div><div>通过 rpm 命令可以查询软件包的详细信息，命令格式如下：</div><div>[root@localhost ~]# rpm -qi 包名</div></div><div><br/></div><div>rpm -ql：命令查询软件包的文件列表</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>通过前面的学习我们知道，rpm 软件包通常采用默认路径安装，各安装文件会分门别类安放在适当的目录文件下。使用 rpm 命令可以查询到已安装软件包中包含的所有文件及各自安装路径，命令格式为：</div><div>[root@localhost ~]# rpm -ql 包名</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@localhost ~]# rpm -qf 系统文件名</div><div>-f 选项的含义是查询系统文件所属哪个软件包，是 file 的首字母。</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@localhost ~]# rpm -qR 包名</div><div>-R（大写）选项的含义是查询软件包的依赖性，是 requires 的首字母。</div></div><div><br/></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">rpm</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">包格式的说明</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">例1：[root@xuegod63 ~]# ls /mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm</span></div><div><span style="font-size: 9pt;">/mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm</span></div><div><span style="font-size: 9pt;">zsh     -5.       0.         2-      28.                  el7.             x86_64.rpm</span></div><div><span style="font-size: 9pt;">软件名 主版本号　次版本号　　修订　release(第几次发布版本)　操作系统版本   软件包是64位包　</span></div><div><span style="font-size: 9pt;">#修订指是的第几次修改bug。   发布指的是：第几次发布。 发布时，可能只是对软件安装的默认参数做了修改，而没有其它改动。</span></div></div></div><h3><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; line-height: normal;">安装</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; line-height: normal;">rpm</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; line-height: normal;">软件</span> <a href="2.0.6RPM理论知识.html" style="color: rgb(105, 170, 53);">RPM理论知识</a></h3><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">互动：</span><span style="font-size: 9pt; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">rpm</span><span style="font-size: 9pt; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">使用时，什么情况下使用软件包全名，什么时候使用软件包名？</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>全名：在安装和更新升级时候使用</div><div>包名：对已经安装过的软件包进行操作时，比如查找已经安装的某个包，卸载包等 ，使用包名。它默认是去目录/var/lib/rpm下面进行搜索。 当一个 rpm 包安装到系统上之后,安装信息通常会保存在本地的 /var/lib/rpm/目录下。</div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">从本地安装</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -ivh /mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm    </span></div><div>#要求已经挂载了/Packages/zsh-5.0.2-28.el7.x86_64.rpm</div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">从网上下载直接安装</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">centos epel</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">扩展源</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">例：</span></div><div><span style="font-size: 9pt;">rpm -ivh <a href="http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm">http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</a>   </span></div><div><span style="font-size: 9pt;">#安装centos epel扩展yum源。 注：epel源是对centos7系统中自带的 base源的扩展。一般会失败。</span></div></div></div><h3><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; line-height: normal;">查看软件包内容是否被修改</span></h3><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>rpm -V包名</div><div>rpm -Vf 文件路径</div><div>例：</div><div>[root@xuegod63 ~]# which  find</div><div>/usr/bin/find</div><div>[root@xuegod63 ~]# rpm -qf /usr/bin/find</div><div>findutils-4.5.11-5.el7.x86_64</div><div>[root@xuegod63 ~]# rpm -Vf /usr/bin/find   #检查具体文件</div><div>[root@xuegod63 ~]# echo aaa &gt;&gt; /usr/bin/find</div><div>[root@xuegod63 ~]# rpm -Vf /usr/bin/find</div><div>S.5....T.    /usr/bin/find</div><div>[root@xuegod63 ~]# rpm -V findutils   #检查包</div><div>S.5....T.    /usr/bin/find</div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">注：如果出现的全是点，表示测试通过</span> 【如有问题查看<a href="2.0.6RPM理论知识.html" style="color: rgb(105, 170, 53);">RPM理论知识</a>的校验和备份，了解详情】</div><h3><span style="font-size: 9pt; line-height: normal; font-family: 微软雅黑, sans-serif;">rpm</span><span style="font-size: 9pt; line-height: normal; font-family: 微软雅黑, sans-serif;">包卸载和升级</span></h3><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">用法：rpm  -e（erase） 包名</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -qa zsh</span></div><div><span style="font-size: 9pt;">zsh-5.0.2-28.el7.x86_64</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -e zsh</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]#</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -qa zsh</span></div><div><span style="font-size: 9pt;">参数： --nodeps 忽略依赖，建议在卸载时不要用rpm去卸载有依赖关系的包，应该用yum</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -e --nodeps lrzsz</span></div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">升级：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -Uvh /mnt/Packages/lrzsz-0.12.20-36.el7.x86_64.rpm    #因为升级时会有一些依赖包要解决。 所以一般我们使用yum update 包  来升级。</span></div></div></div><div style="margin: 0cm 0cm 0.0001pt;"><span style="font-size: 9pt; line-height: normal; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;">解决</span><span style="font-size: 9pt; line-height: normal; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;">rpm</span><span style="font-size: 9pt; line-height: normal; color: red; font-family: 微软雅黑, sans-serif; font-weight: bold;">依赖关系：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@xuegod63 ~]# rpm -ivh /mnt/Packages/mariadb-server-5.5.56-2.el7.x86_64.rpm</div><div>警告：/mnt/Packages/mariadb-server-5.5.56-2.el7.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY</div><div>错误：依赖检测失败：</div><div>mariadb(x86-64) = 1:5.5.56-2.el7 被 mariadb-server-1:5.5.56-2.el7.x86_64 需要</div><div>perl-DBD-MySQL 被 mariadb-server-1:5.5.56-2.el7.x86_64 需要</div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; font-weight: bold;-en-paragraph:true;">解决：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -ivh /mnt/Packages/mariadb-5.5.56-2.el7.x86_64.rpm</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -ivh /mnt/Packages/perl-DBD-MySQL-4.023-5.el7.x86_64.rpm</span></div><div><span style="font-size: 9pt;">[root@xuegod63 ~]# rpm -ivh /mnt/Packages/mariadb-server-5.5.56-2.el7.x86_64.rpm</span></div></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><br/></div><div><br/></div></div></span>
</div></body></html> 